{"version":3,"sources":["utils.js","App.js","index.js"],"names":["getIndex","arr","item","index","forEach","element","idx","JSON","stringify","App","useState","bankData","setBankData","searchResults","setSearchResults","loading","setLoading","dropdownOption","setDropdownOption","searchValue","setSearchValue","activePageNumber","setActivePageNumber","itemsPerPage","setItemsPerPage","currentResults","setCurrentResults","viewFavourite","setViewFavourite","useEffect","a","localStorage","getItem","data","parse","slice","fetch","response","json","bank","setItem","setFavourites","favourites","filter","favourite","className","style","textAlign","fontSize","margin","length","id","name","value","onChange","e","target","newBankData","city","toLowerCase","handleDropdownChange","type","placeholder","found","Object","keys","key","toString","includes","handleTextChange","min","parseInt","handleItemsPerPageChange","checked","showFavourites","map","cursor","alterFavourites","activePage","itemsCountPerPage","totalItemsCount","pageNumber","pageRangeDisplayed","ReactDOM","render","document","getElementById"],"mappings":"+OAAO,SAASA,EAASC,EAAKC,GAC5B,IAAIC,EAAQ,KAIZ,OAHAF,EAAIG,SAAQ,SAACC,EAASC,GAChBC,KAAKC,UAAUH,KAAaE,KAAKC,UAAUN,KAAOC,EAAQG,MAEzDH,E,WCgOMM,MAjOf,WAAgB,IAAD,EACmBC,mBAAS,IAD5B,mBACNC,EADM,KACIC,EADJ,OAE6BF,mBAAS,IAFtC,mBAENG,EAFM,KAESC,EAFT,OAGiBJ,oBAAS,GAH1B,mBAGNK,EAHM,KAGGC,EAHH,OAI+BN,mBAAS,UAJxC,mBAINO,EAJM,KAIUC,EAJV,OAKyBR,mBAAS,IALlC,mBAKNS,EALM,KAKOC,EALP,OAMmCV,mBAAS,GAN5C,mBAMNW,EANM,KAMYC,EANZ,OAO2BZ,mBAAS,IAPpC,mBAONa,EAPM,KAOQC,EAPR,OAQ+Bd,mBAAS,IARxC,mBAQNe,EARM,KAQUC,EARV,OAS6BhB,oBAAS,GATtC,mBASNiB,EATM,KASSC,EATT,KAWbC,qBAAU,WACR,sBAAC,gCAAAC,EAAA,0DAEKC,aAAaC,QAAQ,YAF1B,gBAGSC,EAAO1B,KAAK2B,MAAMH,aAAaC,QAAQ,aAC7CpB,EAAYqB,GACZnB,EAAiBmB,GACjBP,EAAkBO,EAAKE,MAAM,EAAGZ,IANnC,uCAQ0Ba,MACrB,4DATL,cAQSC,EART,iBAWsBA,EAASC,OAX/B,SAWSL,EAXT,QAYQ7B,SAAQ,SAACmC,GAAD,OAAWA,EAAI,WAAgB,KAC5CR,aAAaS,QAAQ,WAAYjC,KAAKC,UAAUyB,IAChDrB,EAAYqB,GACZnB,EAAiBmB,GACjBP,EAAkBO,EAAKE,MAAM,EAAGZ,IAhBnC,QAkBCP,GAAW,GAlBZ,2CAAD,KAoBC,IAEH,IAyBMyB,EAAgB,WACpB,IAAMC,EAAa7B,EAAc8B,QAAO,SAACJ,GAAD,OAAUA,EAAKK,aACvD9B,EAAiB4B,GACjBhB,EAAkBgB,EAAWP,MAAM,EAAGZ,KAoDxC,OACE,qBAAKsB,UAAU,MAAf,SACE,iCACE,oBACEC,MAAO,CACLC,UAAW,SACXC,SAAU,OACVC,OAAQ,mBAJZ,2BAQA,uCAAUpC,EAAcqC,OAAxB,cACA,sBAAKC,GAAG,iBAAR,UACE,yBACEC,KAAK,OACLD,GAAG,WACHE,MAAOpC,EACPqC,SAAU,SAACC,GAAD,OAjGS,SAACA,GAAO,IAC3BF,EAAUE,EAAEC,OAAZH,MACFI,EAAc9C,EAASgC,QAC3B,SAACJ,GAAD,OAAUA,EAAKmB,KAAKC,gBAAkBN,KAExCvC,EAAiB2C,GACjB/B,EAAkB+B,EAAYtB,MAAM,EAAGZ,IACvCL,EAAkBmC,GA0FOO,CAAqBL,IAJxC,UAKE,wBAAQF,MAAM,SAAd,oBACA,wBAAQA,MAAM,QAAd,mBACA,wBAAQA,MAAM,YAAd,sBACA,wBAAQA,MAAM,UAAd,qBACA,wBAAQA,MAAM,UAAd,wBAGF,uBACEF,GAAG,aACHU,KAAK,OACLC,YAAY,SACZT,MAAOlC,EACPmC,SAAU,SAACC,GAAD,OApGK,SAACA,GAAO,IACvBF,EAAUE,EAAEC,OAAZH,MACRjC,EAAeiC,GACf,IAAMI,EAAc9C,EAASgC,QAAO,SAACJ,GACnC,IAAIwB,GAAQ,EAKZ,OAJAC,OAAOC,KAAK1B,GAAMnC,SAAQ,SAAC8D,GACrB3B,EAAK2B,GAAKC,WAAWR,cAAcS,SAASf,EAAMM,iBACpDI,GAAQ,MAELA,KAETjD,EAAiB2C,GACjB/B,EAAkB+B,EAAYtB,MAAM,EAAGZ,IAwFd8C,CAAiBd,MAGpC,uBACEJ,GAAG,iBACHU,KAAK,SACLS,IAAI,IACJR,YAAY,iBACZT,MAAO9B,EACP+B,SAAU,SAACC,GAAD,OAzDa,SAACA,GAAO,IAC/BF,EAAUE,EAAEC,OAAZH,MACJA,IACF7B,EAAgB+C,SAASlB,IACzB3B,EAAkBb,EAAcsB,MAAM,EAAGoC,SAASlB,MAqD3BmB,CAAyBjB,MAG5C,sBAAKJ,GAAG,kBAAR,UACE,uBAAOU,KAAK,WAAWP,SAAU,SAACC,GAAD,OAxEpB,SAACA,GAAO,IACrBkB,EAAYlB,EAAEC,OAAdiB,QACJA,EACFhC,KAEA3B,EAAiBH,GACjBe,EAAkBf,EAASwB,MAAM,EAAGZ,KAEtCK,EAAiB6C,GAgE+BC,CAAenB,MACvD,0DAIHxC,EACC,4CAEA,qBAAKoC,GAAG,kBAAR,SACE,kCACE,gCACE,+BACE,sCACA,yCACA,wCACA,yCACA,sCACA,0CACA,uCACA,2CACA,gDAGJ,gCACG1B,EAAekD,KAAI,SAAC1C,EAAM9B,GACzB,OACE,6BACG6D,OAAOC,KAAKhC,GAAM0C,KAAI,SAACT,EAAK5D,GAC3B,MAAY,cAAR4D,EAEA,6BACE,uBACErB,UAAU,qBACVgB,KAAK,WACLf,MAAO,CAAE8B,OAAQ,WACjBH,QACE9D,EAASX,EAASW,EAAUsB,IAAOiC,GAErCZ,SAAU,SAACC,GAAD,OAlIhB,SAACpD,EAAOoD,GAAO,IAC7BkB,EAAYlB,EAAEC,OAAdiB,QACFhB,EAAW,YAAO9C,GACxB8C,EAAYtD,GAAOyC,UAAY6B,EAC/B1C,aAAaS,QAAQ,WAAYjC,KAAKC,UAAUiD,IAChD7C,EAAY6C,GAER9B,EACFc,KAEA3B,EAAiB2C,GACjB/B,EACE+B,EAAYtB,MACVd,EAAmBE,EAAeA,EAClCF,EAAmBE,KAqHKsD,CAAgB7E,EAASW,EAAUsB,GAAOsB,OATvCjD,GAcD,6BAAe2B,EAAKiC,IAAX5D,OAlBhBH,aA4BrB,qBAAKgD,GAAG,uBAAR,SACE,cAAC,IAAD,CACE2B,WAAYzD,EACZ0D,kBAAmBxD,EACnByD,gBAAiBnE,EAAcqC,OAC/BI,SAhHe,SAAC2B,GACxB3D,EAAoB2D,GACpBvD,EACEb,EAAcsB,MACZ8C,EAAa1D,EAAeA,EAC5B0D,EAAa1D,KA4GT2D,mBAAoB,YCxNhCC,IAASC,OAAO,cAAC,EAAD,IAASC,SAASC,eAAe,W","file":"static/js/main.859c36e7.chunk.js","sourcesContent":["export function getIndex(arr, item) {\n  let index = null;\n  arr.forEach((element, idx) => {\n    if (JSON.stringify(element) === JSON.stringify(item)) index = idx;\n  });\n  return index;\n}\n","import React, { useEffect, useState } from \"react\";\nimport Pagination from \"react-js-pagination\";\nimport { getIndex } from \"./utils\";\n\nfunction App() {\n  const [bankData, setBankData] = useState([]);\n  const [searchResults, setSearchResults] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [dropdownOption, setDropdownOption] = useState(\"Mumbai\");\n  const [searchValue, setSearchValue] = useState(\"\");\n  const [activePageNumber, setActivePageNumber] = useState(1);\n  const [itemsPerPage, setItemsPerPage] = useState(10);\n  const [currentResults, setCurrentResults] = useState([]);\n  const [viewFavourite, setViewFavourite] = useState(false);\n\n  useEffect(() => {\n    (async () => {\n      // cache the api call\n      if (localStorage.getItem(\"bankData\")) {\n        const data = JSON.parse(localStorage.getItem(\"bankData\"));\n        setBankData(data);\n        setSearchResults(data);\n        setCurrentResults(data.slice(0, itemsPerPage));\n      } else {\n        const response = await fetch(\n          \"https://vast-shore-74260.herokuapp.com/banks?city=MUMBAI\",\n        );\n        const data = await response.json();\n        data.forEach((bank) => (bank[\"favourite\"] = false));\n        localStorage.setItem(\"bankData\", JSON.stringify(data));\n        setBankData(data);\n        setSearchResults(data);\n        setCurrentResults(data.slice(0, itemsPerPage));\n      }\n      setLoading(false);\n    })();\n  }, []);\n\n  const handleDropdownChange = (e) => {\n    const { value } = e.target;\n    const newBankData = bankData.filter(\n      (bank) => bank.city.toLowerCase() === value,\n    );\n    setSearchResults(newBankData);\n    setCurrentResults(newBankData.slice(0, itemsPerPage));\n    setDropdownOption(value);\n  };\n\n  const handleTextChange = (e) => {\n    const { value } = e.target;\n    setSearchValue(value);\n    const newBankData = bankData.filter((bank) => {\n      let found = false;\n      Object.keys(bank).forEach((key) => {\n        if (bank[key].toString().toLowerCase().includes(value.toLowerCase()))\n          found = true;\n      });\n      return found;\n    });\n    setSearchResults(newBankData);\n    setCurrentResults(newBankData.slice(0, itemsPerPage));\n  };\n\n  const setFavourites = () => {\n    const favourites = searchResults.filter((bank) => bank.favourite);\n    setSearchResults(favourites);\n    setCurrentResults(favourites.slice(0, itemsPerPage));\n  };\n\n  const alterFavourites = (index, e) => {\n    const { checked } = e.target;\n    const newBankData = [...bankData];\n    newBankData[index].favourite = checked;\n    localStorage.setItem(\"bankData\", JSON.stringify(newBankData));\n    setBankData(newBankData);\n\n    if (viewFavourite) {\n      setFavourites();\n    } else {\n      setSearchResults(newBankData);\n      setCurrentResults(\n        newBankData.slice(\n          activePageNumber * itemsPerPage - itemsPerPage,\n          activePageNumber * itemsPerPage,\n        ),\n      );\n    }\n  };\n\n  const showFavourites = (e) => {\n    const { checked } = e.target;\n    if (checked) {\n      setFavourites();\n    } else {\n      setSearchResults(bankData);\n      setCurrentResults(bankData.slice(0, itemsPerPage));\n    }\n    setViewFavourite(checked);\n  };\n\n  const handleItemsPerPageChange = (e) => {\n    const { value } = e.target;\n    if (value) {\n      setItemsPerPage(parseInt(value));\n      setCurrentResults(searchResults.slice(0, parseInt(value)));\n    }\n  };\n\n  const handlePageChange = (pageNumber) => {\n    setActivePageNumber(pageNumber);\n    setCurrentResults(\n      searchResults.slice(\n        pageNumber * itemsPerPage - itemsPerPage,\n        pageNumber * itemsPerPage,\n      ),\n    );\n  };\n\n  return (\n    <div className=\"App\">\n      <main>\n        <h1\n          style={{\n            textAlign: \"center\",\n            fontSize: \"4rem\",\n            margin: \"3rem 0 1.5rem 0\",\n          }}>\n          Bank Branches\n        </h1>\n        <p>Found {searchResults.length} results</p>\n        <div id=\"search-options\">\n          <select\n            name=\"city\"\n            id=\"dropdown\"\n            value={dropdownOption}\n            onChange={(e) => handleDropdownChange(e)}>\n            <option value=\"mumbai\">Mumbai</option>\n            <option value=\"delhi\">Delhi</option>\n            <option value=\"bangalore\">Banglore</option>\n            <option value=\"chennai\">Chennai</option>\n            <option value=\"kolkata\">Kolkata</option>\n          </select>\n\n          <input\n            id=\"search-bar\"\n            type=\"text\"\n            placeholder=\"Search\"\n            value={searchValue}\n            onChange={(e) => handleTextChange(e)}\n          />\n\n          <input\n            id=\"items-per-page\"\n            type=\"number\"\n            min=\"1\"\n            placeholder=\"Items per page\"\n            value={itemsPerPage}\n            onChange={(e) => handleItemsPerPageChange(e)}\n          />\n\n          <div id=\"show-favourites\">\n            <input type=\"checkbox\" onChange={(e) => showFavourites(e)} />\n            <label>View Favourites</label>\n          </div>\n        </div>\n\n        {loading ? (\n          <h2>Loading...</h2>\n        ) : (\n          <div id=\"table-container\">\n            <table>\n              <thead>\n                <tr>\n                  <th>IFSC</th>\n                  <th>Bank Id</th>\n                  <th>Branch</th>\n                  <th>Address</th>\n                  <th>City</th>\n                  <th>District</th>\n                  <th>State</th>\n                  <th>Bank Name</th>\n                  <th>Favourite</th>\n                </tr>\n              </thead>\n              <tbody>\n                {currentResults.map((data, index) => {\n                  return (\n                    <tr key={index}>\n                      {Object.keys(data).map((key, idx) => {\n                        if (key === \"favourite\")\n                          return (\n                            <td key={idx}>\n                              <input\n                                className=\"favourite-checkbox\"\n                                type=\"checkbox\"\n                                style={{ cursor: \"pointer\" }}\n                                checked={\n                                  bankData[getIndex(bankData, data)][key]\n                                }\n                                onChange={(e) =>\n                                  alterFavourites(getIndex(bankData, data), e)\n                                }\n                              />\n                            </td>\n                          );\n                        else return <td key={idx}>{data[key]}</td>;\n                      })}\n                    </tr>\n                  );\n                })}\n              </tbody>\n            </table>\n          </div>\n        )}\n\n        <div id=\"pagination-container\">\n          <Pagination\n            activePage={activePageNumber}\n            itemsCountPerPage={itemsPerPage}\n            totalItemsCount={searchResults.length}\n            onChange={handlePageChange}\n            pageRangeDisplayed={8}\n          />\n        </div>\n      </main>\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}